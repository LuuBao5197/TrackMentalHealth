sequenceDiagram
    participant U as User
    participant W as Web App
    participant A as AuthController
    participant D as Database

    U->>W: Choose "Forgot Password"
    activate W
    W-->>U: Render form to input email
    U-->>W: Enter email
    W->>A: POST /check-email (email)
    activate A
    A->>D: SELECT COUNT(*) FROM User WHERE email=...
    activate D
    D-->>A: Email exists / not exists
    deactivate D

    alt Email exists
        A-->>W: Status 200 (Email found)
        W->>A: POST /send-otp (email)
        activate A
        A-->>W: OTP sent successfully
        deactivate A

        W-->>U: Prompt user to enter OTP
        U->>W: Enter OTP
        W->>A: POST /check-valid-otp (email, otp)
        activate A
        alt OTP is Correct
            A-->>W: Status 200 (OTP valid)
            W-->>U: Render form to reset password
            U-->>W: Enter new password
            W->>A: POST /reset-password (email, newPassword)
            A->>D: UPDATE User SET password=... WHERE email=...
            activate D
            D-->>A: Update success/fail
            deactivate D
            alt Reset successful
                A-->>W: Status 200
                W-->>U: Display "Password reset successfully" and redirect LoginPage
            else Reset failed
                A-->>W: Status 500
                W-->>U: Display "Password reset failed"
            end
        else OTP is Incorrect
            A-->>W: Status 400
            W-->>U: Display "Invalid OTP" error
        end
        deactivate A
    else Email not exists
        A-->>W: Status 404 (Email not found)
        W-->>U: Display "Email does not exist" error
    end
    deactivate W
